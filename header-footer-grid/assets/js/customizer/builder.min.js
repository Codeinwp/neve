!function(){"use strict";var l,r=function(e){return"object"==typeof e?null!==e:"function"==typeof e},k=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e},f=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},u=function(e){return Object(f(e))},t=Math.ceil,n=Math.floor,A=function(e){return isNaN(e=+e)?0:(0<e?n:t)(e)},i=Math.min,C=function(e){return 0<e?i(A(e),9007199254740991):0},z=(l=!0,function(e,t){var n,i,r=String(f(e)),o=A(t),a=r.length;return o<0||a<=o?l?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(i=r.charCodeAt(o+1))<56320||57343<i?l?r.charAt(o):n:l?r.slice(o,o+2):i-56320+(n-55296<<10)+65536}),o={}.toString,s=function(e){return o.call(e).slice(8,-1)};function e(e,t){return e(t={exports:{}},t.exports),t.exports}var a,c,h=e(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),p=(h.version,e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),d=e(function(e){var t="__core-js_shared__",n=p[t]||(p[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:h.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),g=0,v=Math.random(),w=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++g+v).toString(36))},m=e(function(e){var t=d("wks"),n=p.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:w)("Symbol."+e))}).store=t}),b=m("toStringTag"),x="Arguments"==s(function(){return arguments}()),y=RegExp.prototype.exec,D=function(e,t){var n,i,r,o,a=e.exec;if("function"==typeof a){var l=a.call(e,t);if("object"!=typeof l)throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==(void 0===(n=e)?"Undefined":null===n?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(i=Object(n),b))?r:x?s(i):"Object"==(o=s(i))&&"function"==typeof i.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return y.call(e,t)},S=RegExp.prototype.exec,I=String.prototype.replace,P=S,E="lastIndex",M=(a=/a/,c=/b*/g,S.call(a,"a"),S.call(c,"a"),0!==a[E]||0!==c[E]),T=void 0!==/()??/.exec("")[1];(M||T)&&(P=function(e){var t,n,i,r,o=this;return T&&(n=new RegExp("^"+o.source+"$(?!\\s)",function(){var e=k(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}.call(o))),M&&(t=o[E]),i=S.call(o,e),M&&i&&(o[E]=o.global?i.index+i[0].length:t),T&&i&&1<i.length&&I.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i});var O=P,F=function(e){try{return!!e()}catch(e){return!0}},R=!F(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),j=p.document,G=r(j)&&r(j.createElement),W=!R&&!F(function(){return 7!=Object.defineProperty((e="div",G?j.createElement(e):{}),"a",{get:function(){return 7}}).a;var e}),U=Object.defineProperty,L={f:R?Object.defineProperty:function(e,t,n){if(k(e),t=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}(t,!0),k(n),W)try{return U(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},N=R?function(e,t,n){return L.f(e,t,{enumerable:!((i=1)&i),configurable:!(2&i),writable:!(4&i),value:n});var i}:function(e,t,n){return e[t]=n,e},X={}.hasOwnProperty,$=function(e,t){return X.call(e,t)},B=d("native-function-to-string",Function.toString),H=e(function(e){var o=w("src"),t="toString",a=(""+B).split(t);h.inspectSource=function(e){return B.call(e)},(e.exports=function(e,t,n,i){var r="function"==typeof n;r&&($(n,"name")||N(n,"name",t)),e[t]!==n&&(r&&($(n,o)||N(n,o,e[t]?""+e[t]:a.join(String(t)))),e===p?e[t]=n:i?e[t]?e[t]=n:N(e,t,n):(delete e[t],N(e,t,n)))})(Function.prototype,t,function(){return"function"==typeof this&&this[o]||B.call(this)})}),V=function(i,r,e){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(i),void 0===r)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}},J="prototype",Q=function(e,t,n){var i,r,o,a,l=e&Q.F,s=e&Q.G,c=e&Q.S,f=e&Q.P,d=e&Q.B,u=s?p:c?p[t]||(p[t]={}):(p[t]||{})[J],g=s?h:h[t]||(h[t]={}),v=g[J]||(g[J]={});for(i in s&&(n=t),n)o=((r=!l&&u&&void 0!==u[i])?u:n)[i],a=d&&r?V(o,p):f&&"function"==typeof o?V(Function.call,o):o,u&&H(u,i,o,e&Q.U),g[i]!=o&&N(g,i,a),f&&v[i]!=o&&(v[i]=o)};p.core=h,Q.F=1,Q.G=2,Q.S=4,Q.P=8,Q.B=16,Q.W=32,Q.U=64,Q.R=128;var q=Q;q({target:"RegExp",proto:!0,forced:O!==/./.exec},{exec:O});var K=m("species"),Y=!F(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Z=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ee=Math.max,te=Math.min,ne=Math.floor,ie=/\$([$&`']|\d\d?|<[^>]*>)/g,re=/\$([$&`']|\d\d?)/g;function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n,e,t){var i=m(n),o=!F(function(){var e={};return e[i]=function(){return 7},7!=""[n](e)}),r=o?!F(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[K]=function(){return t}),t[i](""),!e}):void 0;if(!o||!r||"replace"===n&&!Y||"split"===n&&!Z){var a=/./[i],l=t(f,i,""[n],function(e,t,n,i,r){return t.exec===O?o&&!r?{done:!0,value:a.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),s=l[0],c=l[1];H(String.prototype,n,s),N(RegExp.prototype,i,2==e?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}}("replace",2,function(r,o,S,I){return[function(e,t){var n=r(this),i=null==e?void 0:e[o];return void 0!==i?i.call(e,n,t):S.call(String(n),e,t)},function(e,t){var n=I(S,e,this,t);if(n.done)return n.value;var i=k(e),r=String(this),o="function"==typeof t;o||(t=String(t));var a=i.global;if(a){var l=i.unicode;i.lastIndex=0}for(var s,c,f=[];;){var d=D(i,r);if(null===d)break;if(f.push(d),!a)break;""===String(d[0])&&(i.lastIndex=(s=r,(c=C(i.lastIndex))+(l?z(s,c).length:1)))}for(var u,g="",v=0,h=0;h<f.length;h++){d=f[h];for(var p=String(d[0]),w=ee(te(A(d.index),r.length),0),m=[],b=1;b<d.length;b++)m.push(void 0===(u=d[b])?u:String(u));var x=d.groups;if(o){var _=[p].concat(m,w,r);void 0!==x&&_.push(x);var y=String(t.apply(void 0,_))}else y=P(p,r,w,m,x,t);v<=w&&(g+=r.slice(v,w)+y,v=w+p.length)}return g+r.slice(v)}];function P(o,a,l,s,c,e){var f=l+o.length,d=s.length,t=re;return void 0!==c&&(c=u(c),t=ie),S.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,l);case"'":return a.slice(f);case"<":n=c[t.slice(1,-1)];break;default:var i=+t;if(0===i)return e;if(d<i){var r=ne(i/10);return 0===r?e:r<=d?void 0===s[r-1]?t.charAt(1):s[r-1]+t.charAt(1):e}n=s[i-1]}return void 0===n?"":n})}});var ae=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)},le=Array.isArray||function(e){return"Array"==s(e)},se=m("species"),ce=function(e,t){return le(n=e)&&("function"!=typeof(i=n.constructor)||i!==Array&&!le(i.prototype)||(i=void 0),r(i)&&null===(i=i[se])&&(i=void 0)),new(void 0===i?Array:i)(t);var n,i},fe=m("unscopables"),de=Array.prototype;null==de[fe]&&N(de,fe,{});var ue,ge,ve,he,pe,we,me,be,xe,_e,ye,Se,Ie,Pe,ke,Ae,Ce,ze,De,Ee=(ve=1==(ue=5),he=2==ue,pe=3==ue,we=4==ue,me=6==ue,be=5==ue||me,xe=ge||ce,function(e,t,n){for(var i,r,o=u(e),a=ae(o),l=V(t,n,3),s=C(a.length),c=0,f=ve?xe(e,s):he?xe(e,0):void 0;c<s;c++)if((be||c in a)&&(r=l(i=a[c],c,o),ue))if(ve)f[c]=r;else if(r)switch(ue){case 3:return!0;case 5:return i;case 6:return c;case 2:f.push(i)}else if(we)return!1;return me?-1:pe||we?we:f}),Me="find",Te=!0;Me in[]&&Array(1)[Me](function(){Te=!1}),q(q.P+q.F*Te,"Array",{find:function(e){return Ee(this,e,1<arguments.length?arguments[1]:void 0)}}),_e=Me,de[fe][_e]=!0,Se=jQuery,Ie=Se(document),Pe=wp.customize||null,ke=HFG_Layout_Builder.isRTL,ye=function(o,a){var e={id:a,controlId:"",cols:12,cellHeight:45,items:[],container:null,ready:!1,devices:{desktop:"Desktop",mobile:"Mobile/Tablet"},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,getTemplate:_.memoize(function(){var i=this,r={evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g,variable:"data"};return function(e,t,n){return _.isUndefined(t)&&(t="tmpl-customize-control-"+i.type),!_.isUndefined(n)&&_.isString(n)?r.variable=n:r.variable="data",_.template(Se("#"+t).html(),null,r)(e)}}),drag_drop:function(){var r=this;Se(".hfg--device-panel",r.container).each(function(){var n=Se(this),i=n.data("device");r.panels[i]={},Se(".hfg--cb-items",n).each(function(e){var t=Se(this).attr("data-id")||"",n="_sid_"+i+e;t&&(n="_sid_"+i+"-"+t),Se(this).attr("id",n)}),Se(".grid-stack",n).each(function(){var e=Se(this).attr("data-id")||"";r.panels[i][e]=Se(this),Se(this).droppable({out:function(e,t){},over:function(e,t){},drop:function(e,t){var n=Se(this);r.gridster(n,t,e),r.save()}})});var e=Se("#_sid_mobile-sidebar",n),t=e.attr("id")||!1;Se(".hfg-available-items .grid-stack-item",n).draggable({revert:"invalid",connectToSortable:!!t&&"#"+t,start:function(e,t){Se("body").addClass("builder-item-moving"),Se(".hfg--cb-items",n).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){Se("body").removeClass("builder-item-moving"),Se(".hfg--cb-items",n).css("z-index",""),t.helper.parent().css("z-index","")}}),0<e.length&&(e.sortable({revert:!0,change:function(e,t){r.save()},receive:function(e,t){Se(this).find(".grid-stack-item").removeAttr("style").attr("data-gs-width",1),r.save()}}),r.panels[i].sidebar=e),Se(".hfg-available-items .grid-stack-item",n).resizable({handles:"w, e",stop:function(e,t){r.setGridWidth(t.element.parent(),t),r.save()}})})},sortGrid:function(e){Se(".grid-stack-item",e).each(function(){var e=Se(this),t=e.attr("data-gs-x")||0;t=parseInt(t);var n=e.next();if(0<n.length){var i=n.attr("data-gs-x")||0;(i=parseInt(i))<t&&e.insertAfter(n)}})},getX:function(e){var t=e.attr("data-gs-x")||0;return parseInt(t)},getW:function(e,t){var n;return _.isUndefined(t)&&(t=!1),n=t?e.attr("data-df-width")||1:e.attr("data-gs-width")||1,parseInt(n)},gridGetItemInfo:function(e,t,n){var i,r=this.getX(e),o=this.getW(e),a=0,l=0,s=!1;for(i=r-1;0<=i&&!s;)0===t[i]?a++:s=!0,i--;for(s=!1,i=r+o;i<this.cols&&!s;)0===t[i]?l++:s=!0,i++;return{flag:t,x:r,w:o,item:e,before:a,after:l,id:e.attr("data-id")||"",wrapper:n}},updateItemsPositions:function(e){for(var t=this.cols,n=0;n<=t;n++)"object"!==oe(e[n])&&"function"!=typeof e[n]||e[n].attr("data-gs-x",n)},gridster:function(e,t,n){var g=[],v=this.cols,h=function(e){for(var t=e.x,n=e.w,i=e.el,r=t;r<t+n;r++)g[r]=r===t?i:1},s=function(e){for(var t=e.x,n=e.w,i=t;i<t+n;i++)g[i]=0},p=function(e,t){for(var n=0,i=e;i<v;i++)if(0===g[i])n++;else if(t)return n;return n},w=function(e,t){var n=0;void 0===t&&(t=!1);for(var i=e;0<=i;i--)if(0===g[i])n++;else if(t)return n;return n},m=function(e){return 0===g[e]},b=function(e,t){for(var n=e;n<e+t;){if(0!==g[n])return!1;n++}return!0},x=function(e){if(e<0)return{x:-1,w:1};var t,n,i,r=-1;if(g[e]<=1)for(t=e,i=!1;0<=t&&!i;)1!==g[t]&&0!==g[t]&&(r=t,i=!0),t--;else r=e;for(t=r+1,n=r;1===g[t];)n++,t++;return{x:r,w:n+1-r}},y=function(e){var t,n,i,r=-1;if(g[e]<v)for(t=e,i=!1;t<v&&!i;)1!==g[t]&&0!==g[t]&&(r=t,i=!0),t++;else r=e;for(t=r+1,n=r;1===g[t];)n++,t++;return{x:r,w:n+1-r}},S=function(e,t){var n=g.slice(),i=w(e);if(0===i)return t;var r=x(e),o=0<=r.x?r.x+r.w-1:e,a=t;i<t&&(a=i);for(var l=0,s=0,c=o;s<=a&&0<=c;)0===g[c]&&(s++,l=c),c--;var f=[],d=0;for(c=l;c<=o;c++)(g[c]=0)!==n[c]&&(f[d]=n[c],d++);for(d=0,c=l;c<=o;c++)void 0!==f[d]?g[c]=f[d]:g[c]=0,d++;return t-a},I=function(e,t){var n=g.slice(),i=p(e);if(0===i)return t;var r=x(e),o=0<=r.x?r.x:e,a=t;i<t&&(a=i);for(var l=e,s=0,c=o;s<a&&c<v;)0===g[c]&&(s++,l=c),c++;var f=[],d=0;for(c=o;c<=l;c++)(g[c]=0)!==n[c]&&(f[d]=n[c],d++);for(d=f.length-1,c=l;o<=c;c--)void 0!==f[d]?g[c]=f[d]:g[c]=0,d--;return t-a},P=function(){k.updateItemsPositions(g)},c=function(e,t){var n,i,r,o,a,l,f=e.x,s=e.w,c=function(){for(var e=0,t=0;t<v;t++)0===g[t]&&e++;return e}();if(c<=0)return!1;if(_.isUndefined(t)&&(t=!1),!t){if(m(f)){if(b(f,o=s))return h(e),e.el.attr("data-gs-x",f),e.el.attr("data-gs-width",o),!0;for((n=s<=(i=p(f,!0))+(r=w(f-1,!0))&&s-i<=r?f-(s-i):f-r)<0&&(n=0);1<=o;){if(b(n,o))return e.x=n,e.w=o,h(e),e.el.attr("data-gs-x",n),e.el.attr("data-gs-width",o),!0;o--}}if(1===g[f]){var d=x(f);if(0<=d.x&&f>d.x+Math.floor(d.w/2)&&f>d.x&&(n=d.x+d.w,s<=(i=p(n,!0))))return h({el:e.el,x:n,w:s}),e.el.attr("data-gs-x",n),e.el.attr("data-gs-width",s),!0}}console.log("--------------------------------------------------------"),function(e,t){var n,i,r,o,a=0,l=!1;if(console.log("insert at x",t),console.log("insert node",e),m(t)){if(console.log("empty_at_X",t),n=x(t),i=y(t),-1<n.x){if(console.log("found_item_left",n),(a=p(n.x))>=e.w)if(b(t,e.w))console.log("found",e),f=t,l=!0;else if(e.ox>t)for(r=n.x+n.w,o=(o=w(r))<=e.w?e.w-o:e.w,I(r+1,o),a=p(r),console.log("loop_start_i",r);r>n.x+n.w&&!l;)b(r,e.w)&&(console.log("found_in_loop__i",r),f=r,l=!0),r--;if(!l&&e.ox<t){console.log("try_move_items_to_left",n),r=n.x+n.w-1,o=w(n.x),console.log("el",o),o>e.w&&(o=e.w),o-=2,S(n.x,o),console.log("try_move_items_to_left_flag",g),console.log("el2",o),r-=a=p(r),i=y(t);var s=n.x+n.w;for(-1<i.x&&(s=i.x),console.log("loop_start 2_i",r);r<s&&!l;)b(r,e.w)&&(console.log("found_in_loop__@__i",r),f=r,l=!0),r++}l||(f=n.x+n.w,e.w=a,e.x=f,console.log("resize_new_w",a),console.log("resize_new_x",f))}else if(-1<i.x){console.log("found_item_right",i),i=y(t),a=p(t,!1),console.log("move_all_item_to Right");var c=a>=e.w?e.w:a;for(I(t,c),r=i.x,console.log("loop_start Right",r);0<=r&&!l;)b(r,e.w)&&(f=r,e.x=f,l=!0,console.log("found_in_while_r",r)),r--;l||(f=t,e.w=a,e.x=f,console.log("resize_r_new_w",a),console.log("resize_r_new_x",f))}}else if(console.log("x is not empty"),n=x(t),e.ox<n.x)if(S(t,e.w),console.log("Move All items to left"),m(t))f=t;else{for(;!m(t)&&t<=k.cols-1;)t++;f=t}else if(I(t,e.w),console.log("Move All items to right"),m(t))f=t;else{for(;!m(t)&&0<=t;)t--;f=t}f>k.cols&&(f=k.cols-1),e.x=f,console.log("new node x",f)}(e,_.clone(f));var u=0;for(f+s>k.cols-1&&(u=w(f,!0),console.log("le",u),0<u&&console.log("move_Left",f+s-k.cols-1)),P();1<=s;){if(s<=c){if(b(f,s))return console.log("",{x:f,w:s}),e.w=s,h(e),e.el.attr("data-gs-x",f),e.el.attr("data-gs-width",s),!0;for(u=w(f,!0),a=f-u,console.log("newX",a),l=a;l<v;){if(b(l,s))return console.log("Insert in While",{x:l,w:s}),e.w=s,h({el:e.el,x:l,w:s}),e.el.attr("data-gs-x",l),e.el.attr("data-gs-width",s),!0;l++}}s--}for(s=e.w;1<=s;){for(l=0;l<v;){if(b(l,s))return console.log("Insert in While 2",{x:l,w:s}),h({el:e.el,x:l,w:s}),e.el.attr("data-gs-x",l),e.el.attr("data-gs-width",s),!0;l++}s--}return console.log("Insert END While",{x:l,w:s}),!1},k=this,i=(g=k.getFlag(e)).slice(),r=e.offset();k.draggingItem=t.draggable;var o,a,l,f,d,u=e.width(),A=u/k.cols,C=t.offset;l=k.getW(t.draggable,!1),a=k.getW(t.draggable,!0),f=t.draggable.width(),console.log("DROP ITEM WIDTH",a),console.log("DROP ITEM cw WIDTH",l);var z=k.getX(t.draggable);ke&&s({el:t.draggable,x:z,w:a});var D,E=0,M=0,T=!1;if(t.draggable.parent().is(e)?(d=!0,console.log("Item in this row"),a=l):(d=!1,console.log("Not in this row"),a<l&&(a=l)),ke?(E=Math.round((r.left+u+10-n.clientX)/A),(M=Math.round((r.left+u-(C.left+f+10))/A))<0&&(M=0)):(E=Math.round((n.clientX-r.left)/A),(M=Math.round((C.left-r.left-10)/A))<0&&(M=0)),E>k.cols&&(E=k.cols),D=o=M,ke){if(!m(D))for(;D<k.cols&&!T;)m(D)?T=!0:D++}else if(!m(o)){for(;o<=E&&!T;)m(o)?T=!0:o++;E<o&&(o=E)}if(T||(o=d?M:E),o<0&&(o=0),o+a>=k.cols){for(T=!0,D=o;D+a>k.cols&&T;)m(D)?D--:(D++,T=!1),console.log("loop_i",D);console.log("Find new _i, w: "+a,D),o=D}console.log("DROP Cursor",E),console.log("DROP row x cacl",o),console.log("DROP item w",a);var O={el:t.draggable,x:o,w:a,ox:z,ow:l};O.x<=0&&(O.x=0);var F=!1;d?(O.x=parseInt(t.draggable.attr("data-gs-x")||0),O.w=parseInt(t.draggable.attr("data-gs-width")||1),console.log("swap node",O),function(e,t){var n=e.w;s(e),console.log("Swap newX",t),console.log("Before Swap FLAG",g);var i=x(t),r=0;if(-1<i.x&&(r=i.x+i.w),b(t,n))return h({el:e.el,x:t,w:n});if(0<r&&b(r,n)&&r<=t){var o=y(t);if(-1<o.x&&e.w+t>=o.x)for(var a=_.clone(t);r<a;){if(b(a,n))return h({el:e.el,x:a,w:n});a--}if(t+n>k.cols){var l=k.cols-n;if(b(l,n))return h({el:e.el,x:l,w:n})}return h({el:e.el,x:r,w:n})}e.x=t,c(e,!0)}(O,o),F=!0):(F=c(O),console.log("Insert node")),F?(t.draggable.removeClass("item-from-list"),e.append(t.draggable),t.draggable.removeAttr("style"),console.log("DID Flag: ",g),k.draggingItem=null):(t.draggable.removeAttr("style"),console.log("Can not insert"),g=i),P(),k.updateAllGrids()},updateAllGrids:function(){var n=this;_.each(n.panels[n.activePanel],function(e,t){n.updateGridFlag(e)})},setGridWidth:function(e,t){var n,i,r=this,o=t.element,a=e.width(),l=t.size.width,s=t.originalSize.width,c=Math.ceil(a/r.cols)-1;i=ke?(n=t.originalPosition.left>t.position.left,s!==l):(n=t.originalPosition.left>t.position.left,t.originalPosition.left<t.position.left);var f,d,u,g=t.originalElement.attr("data-gs-width")||1,v=t.originalElement.attr("data-gs-x")||0;g=parseInt(g),v=parseInt(v);var h,p=r.getFlag(e),w=r.gridGetItemInfo(t.originalElement,p,e);if(n)return ke?(d=Math.floor((t.position.left-1)/c),(f=(d=r.cols-d)-v-g)>w.after&&(f=w.after),u=g+f,o.attr("data-gs-x",v).removeAttr("style")):((f=v-(d=Math.floor((t.position.left-1)/c)))>w.before&&(f=w.before),d=v-f,u=g+f,o.attr("data-gs-x",d).removeAttr("style")),o.attr("data-gs-width",u).removeAttr("style"),void r.updateGridFlag(e);if(i)return ke?t.originalPosition.left!==t.position.left?(d=Math.floor((t.position.left-1)/c),g<(f=g+v-(d=r.cols-d))&&(f=0),u=g-f,(d=v)<=0&&(d=0),console.log("diffRight_RTL_COL_New __left")):(d=Math.ceil((t.position.left+t.size.width-11)/c),(f=v-(d=r.cols-d))>w.before&&(f=w.before),d=v-f,u=g+f):((u=g-(f=(d=Math.round((t.position.left-1)/c))-v))<=0&&(u=1,f=0),d=v+f),o.attr("data-gs-x",d).removeAttr("style"),o.attr("data-gs-width",u).removeAttr("style"),void r.updateGridFlag(e);var m,b=w.x;m=Math.ceil((t.position.left+t.size.width-11)/c),h=w.w+(m-(b+w.w)),w.x+h>w.x+w.w+w.after&&(h=w.w+w.after),l<t.originalSize.width&&((m=Math.round((t.position.left+t.size.width-11)/c))<=b&&(m=b+1),h=w.w-(b+w.w-m)),h<=0&&(h=1),o.attr("data-gs-width",h).removeAttr("style"),r.updateGridFlag(e)},getFlag:function(e){var t,n=e.data("gridRowFlag")||[];if(_.isEmpty(n)){for(t=0;t<this.cols;t++)n[t]=0;e.data("gridRowFlag",n)}return n},updateGridFlag:function(e){var i,r=this,o=[];for(i=0;i<r.cols;i++)o[i]=0;return Se(".grid-stack-item",e).each(function(e){Se(this).removeAttr("style");var t=r.getX(Se(this)),n=r.getW(Se(this));for(i=t;i<t+n;i++)o[i]=i===t?Se(this):1}),e.data("gridRowFlag",o),r.updateItemsPositions(o),r.sortGrid(e),o},addNewWidget:function(e,t){var n=this,i=n.container.find(".hfg--device-panel.hfg--panel-"+n.activePanel),r=t;_.isObject(r)||(r=i.find(".hfg--cb-items").first());var o=e;o.draggable({revert:"invalid",appendTo:i,scroll:!1,zIndex:99999,handle:".grid-stack-item-content",start:function(e,t){Se("body").addClass("builder-item-moving"),Se(".hfg--cb-items",i).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){Se("body").removeClass("builder-item-moving"),Se(".hfg--cb-items",i).css("z-index",""),n.save()},drag:function(e,t){}}).resizable({handles:"w, e",start:function(e,t){t.originalElement.css({right:"auto",left:t.position.left})},stop:function(e,t){n.setGridWidth(t.element.parent(),t),n.save()}}),r.append(o),n.updateGridFlag(r)},addPanel:function(e){var t=this.getTemplate(),n="tmpl-hfg--cb-panel";if(0!==Se("#"+n).length)return _.isObject(o.rows)||(o.rows={}),'<div class="hfg--device-panel hfg-vertical-panel hfg--panel-'+e+'" data-device="'+e+'">'+t({device:e,id:o.id,rows:o.rows},n)+"</div>"},addDevicePanels:function(){var i=this;_.each(i.devices,function(e,t){var n=i.addPanel(t);Se(".hfg--cb-devices-switcher",i.container).append('<a href="#" class="switch-to switch-to-'+t+'" data-device="'+t+'">'+e+"</a>"),Se(".hfg--cb-body",i.container).append(n)});var e=Se("#hfg-upsell-tmpl");e.length&&Se(e.html()).insertAfter(Se(".hfg--cb-devices-switcher",i.container))},addItem:function(e){var t=this.getTemplate(),n="tmpl-hfg--cb-item";if(0!==Se("#"+n).length){var i=t(e,n);return Se(i)}},addAvailableItems:function(){var a=this;_.each(a.devices,function(e,r){var o=Se('<div class="hfg-available-items" data-device="'+r+'"></div>');Se(".hfg--panel-"+r,a.container).append(o),_.each(a.items,function(e){var t=!0;if(!_.isUndefined(e.devices)&&!_.isEmpty(e.devices))if(_.isString(e.devices))e.devices!==r&&(t=!1);else{var n=!1;_.each(e.devices,function(e){r===e&&(n=!0)}),n||(t=!1)}if(t){var i=a.addItem(e);o.append(i)}})})},switchToDevice:function(e,t){var n=this;1<_.size(n.devices)?(Se(".hfg--cb-devices-switcher a",n.container).removeClass("hfg--tab-active"),Se(".hfg--cb-devices-switcher .switch-to-"+e,n.container).addClass("hfg--tab-active"),Se(".hfg--device-panel",n.container).addClass("hfg--panel-hide"),Se(".hfg--device-panel.hfg--panel-"+e,n.container).removeClass("hfg--panel-hide"),n.activePanel=e):Se(".hfg--cb-devices-switcher a",n.container).addClass("hfg--tab-active"),(_.isUndefined(t)||t)&&("desktop"===e?Se("#customize-footer-actions .preview-desktop").trigger("click"):Se("#customize-footer-actions .preview-mobile").trigger("click"))},addExistingRowsItems:function(){var a=this,t=!1;Pe.control(a.controlId).setting.get()&&(t=JSON.parse(Pe.control(a.controlId).setting.get())),_.isObject(t)||(t={}),_.each(a.panels,function(r,o){var e={};_.isObject(t[o])&&(e=t[o]),_.each(e,function(e,i){_.isUndefined(e)||_.each(e,function(e,t){var n=Se('.hfg-available-items[data-device="'+o+'"] .grid-stack-item[data-id="'+e.id+'"]').first();n.attr("data-gs-width",e.width),n.attr("data-gs-x",e.x),n.removeClass("item-from-list"),a.addNewWidget(n,r[i])})})}),a.ready=!0},focus:function(){this.container.on("click",".hfg--cb-item-setting, .hfg--cb-item-name, .item-tooltip",function(e){e.preventDefault();var t=Se(this).data("section")||"",n=Se(this).attr("data-control")||"",i=!1;n&&(_.isUndefined(Pe.control(n))||(Pe.control(n).focus(),i=!0)),i||t&&!_.isUndefined(Pe.section(t))&&Pe.section(t).focus()}),this.container.on("click",".hfg--cb-row-settings",function(e){e.preventDefault();var t=Se(this).attr("data-id")||"",n=o.id+"_"+t;_.isUndefined(Pe.section(n))||Pe.section(n).focus()})},remove:function(){var i=this;Ie.on("click",".hfg--device-panel .hfg--cb-item-remove",function(e){e.preventDefault();var t=Se(this).closest(".grid-stack-item"),n=t.closest(".hfg--device-panel");t.attr("data-gs-width",1),t.attr("data-gs-x",0),t.removeAttr("style"),Se(".hfg-available-items",n).append(t),i.updateAllGrids(),i.save()})},encodeValue:function(e){return JSON.stringify(e)},decodeValue:function(e){return JSON.parse(e)},save:function(){var i=this;if(i.ready){var r={};_.each(i.panels,function(e,n){r[n]={},_.each(e,function(e,t){r[n][t]=_.map(Se(" > .grid-stack-item",e),function(e){return e=Se(e),{x:i.getX(e),y:1,width:i.getW(e),height:1,id:e.data("id")||""}})})}),Pe.control(i.controlId).setting.set(i.encodeValue(r))}},showPanel:function(){var t=this;this.container.removeClass("hfg--builder--hide").addClass("hfg--builder-show"),setTimeout(function(){var e=t.container.height();Se("#customize-preview").addClass("cb--preview-panel-show").css({bottom:e-1,"margin-top":"0px"})},100)},hidePanel:function(){this.container.removeClass("hfg--builder-show"),Se("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var t=this;Pe.state("expandedPanel").bind(function(e){Pe.panel(o.panel).expanded()?(Ie.trigger("hfg_panel_builder_open",[o.panel]),top._current_builder_panel=a,t.showPanel()):t.hidePanel()}),t.container.on("click",".hfg--panel-close",function(e){e.preventDefault(),t.container.toggleClass("hfg--builder--hide"),t.container.hasClass("hfg--builder--hide")?Se("#customize-preview").removeClass("cb--preview-panel-show"):Se("#customize-preview").addClass("cb--preview-panel-show")})},panelLayoutCSS:function(){var e=Se("#customize-controls").width();Pe.state("paneVisible").get()||(e=0),ke?this.container.find(".hfg--cb-inner").css({"margin-right":e}):this.container.find(".hfg--cb-inner").css({"margin-left":e})},init:function(e,t,n){var i=this,r=i.getTemplate()(o,"tmpl-hfg--builder-panel");i.container=Se(r),Se("body .wp-full-overlay").append(i.container),i.controlId=e,i.items=t,i.devices=n,o.section&&Pe.section(o.section).container.addClass("hfg--hide"),i.addDevicePanels(),i.switchToDevice(i.activePanel),i.addAvailableItems(),i.switchToDevice(i.activePanel),i.drag_drop(),i.focus(),i.remove(),i.addExistingRowsItems(),Pe.panel(o.panel).expanded()?i.showPanel():i.hidePanel(),Pe.previewedDevice.bind(function(e){"desktop"===e?i.switchToDevice("desktop",!1):i.switchToDevice("mobile",!1)}),i.togglePanel(),Pe.state("paneVisible").get()&&i.panelLayoutCSS(),Pe.state("paneVisible").bind(function(){i.panelLayoutCSS()}),Se(window).resize(_.throttle(function(){i.panelLayoutCSS()},100)),i.container.on("click",".hfg--cb-devices-switcher a.switch-to",function(e){e.preventDefault();var t=Se(this).data("device");i.switchToDevice(t)}),Ie.trigger("hfg_builder_panel_loaded",[a,i])}};return e.init(o.control_id,o.items,o.devices),e},Ae=jQuery,Ce=wp.customize||null,ze=Ae(document),De={},Ce.bind("ready",function(e,t){_.each(HFG_Layout_Builder.builders,function(e,t){De[t]=new ye(e,t)}),Ce.bind("pane-contents-reflowed",function(){setTimeout(function(){0===Ae("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice .footer_moved_widgets_text").length&&Ae("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice").append('<p class="footer_moved_widgets_text">'+HFG_Layout_Builder.footer_moved_widgets_text+"</p>")},1e3)}),Ce.state("expandedSection").bind(function(e){Ae(".hfg--device-panel .grid-stack-item").removeClass("item-active"),Ae(".hfg--cb-row").removeClass("row-active"),e&&(Ae('.hfg--cb-row[data-id="'+e.id+'"]').addClass("row-active"),Ae(".hfg--device-panel .grid-stack-item.for-s-"+e.id).addClass("item-active"))})}),ze.on("click",".focus-section",function(e){e.preventDefault();var t=Ae(this).attr("data-id")||"";t||(t=(t=Ae(this).attr("href")||"").replace("#","")),t&&Ce.section(t)&&Ce.section(t).focus()}),ze.on("click",".focus-control",function(e){e.preventDefault();var t=Ae(this).attr("data-id")||"";t||(t=(t=Ae(this).attr("href")||"").replace("#","")),t&&Ce.control(t)&&Ce.control(t).focus()}),ze.on("click",".focus-panel",function(e){e.preventDefault();var t=Ae(this).attr("data-id")||"";t||(t=(t=Ae(this).attr("href")||"").replace("#","")),t&&Ce.panel(t)&&Ce.panel(t).focus()}),ze.on("mouseover",".hfg--cb-row .grid-stack-item",function(e){var t=Ae(this),n=Ae(".hfg--cb-item-remove",t).outerWidth()+Ae(".hfg--cb-item-setting",t).outerWidth();Ae(".grid-stack-item-content",t).innerWidth()-50<n&&t.addClass("show-tooltip")}),ze.on("mouseleave",".hfg--cb-row .grid-stack-item",function(e){Ae(this).removeClass("show-tooltip")})}();
