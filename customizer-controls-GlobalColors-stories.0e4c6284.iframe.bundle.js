"use strict";(self.webpackChunkneve=self.webpackChunkneve||[]).push([[671],{"./stories/customizer-controls/GlobalColors.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllPalettes:()=>AllPalettes,Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>GlobalColors_stories});var react=__webpack_require__("./node_modules/react/index.js"),build_module_button=__webpack_require__("./node_modules/@wordpress/components/build-module/button/index.js"),modal=__webpack_require__("./node_modules/@wordpress/components/build-module/modal/index.js"),build_module=__webpack_require__("./node_modules/@wordpress/i18n/build-module/index.js"),svg=__webpack_require__("./node_modules/@wordpress/primitives/build-module/svg/index.js");const library_trash=(0,react.createElement)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.wA,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"}));var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PaletteSelector=({values,save})=>{const{palettes,activePalette}=values,[isOpenModal,setIsOpenModal]=(0,react.useState)(!1),[willDelete,setWillDelete]=(0,react.useState)(""),PREVIEW_COLORS=["nv-primary-accent","nv-dark-bg","nv-light-bg","nv-site-bg"],deletePalette=()=>{const nextValues={...values};activePalette===willDelete&&(nextValues.activePalette="base"),delete nextValues.palettes[willDelete],setIsOpenModal(!1),setWillDelete(""),save(nextValues)},orderedPaletteKeys=[...Object.keys(values.palettes).filter((paletteSlug=>!palettes[paletteSlug].allowDeletion)),...Object.keys(values.palettes).filter((paletteSlug=>palettes[paletteSlug].allowDeletion))];return(0,jsx_runtime.jsx)("div",{className:"neve-palettes-wrap",children:orderedPaletteKeys.map((id=>{const{colors,allowDeletion,name}=palettes[id],paletteClasses=classnames_default()(["neve-global-color-palette-inner",{active:activePalette===id}]);return(0,jsx_runtime.jsxs)("div",{className:"neve-global-color-palette",children:[allowDeletion&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.A,{isLink:!0,icon:library_trash,iconSize:21,className:"delete-palette",title:(0,build_module.__)("Remove Palette","neve"),onClick:()=>{setWillDelete(id),setIsOpenModal(!0)}}),isOpenModal&&(0,jsx_runtime.jsxs)(modal.A,{isDismissible:!1,className:"neve-global-colors-confirm-delete-modal",title:(0,build_module.nv)((0,build_module.__)("Are you sure you want to delete the %s palette?","neve"),palettes[willDelete].name),children:[(0,jsx_runtime.jsx)("p",{children:(0,build_module.__)("If this is the currently active palette, the current palette will be switched to the Base one.","neve")}),(0,jsx_runtime.jsxs)("div",{className:"actions",children:[(0,jsx_runtime.jsx)(build_module_button.A,{isPrimary:!0,icon:"trash",onClick:deletePalette,children:(0,build_module.__)("Delete","neve")}),(0,jsx_runtime.jsx)(build_module_button.A,{isSecondary:!0,onClick:()=>{setIsOpenModal(!1),setWillDelete("")},children:(0,build_module.__)("Cancel","neve")})]})]})]}),(0,jsx_runtime.jsxs)("button",{className:paletteClasses,onClick:e=>{e.preventDefault(),(id=>{const nextValues={...values};nextValues.activePalette=id,save(nextValues)})(id)},children:[PREVIEW_COLORS.map(((color,index)=>(0,jsx_runtime.jsx)("div",{className:"color",style:{background:colors[color]}},index))),(0,jsx_runtime.jsx)("span",{className:"title",children:name})]},name.toLowerCase())]},id)}))})};PaletteSelector.displayName="PaletteSelector";const global_colors_PaletteSelector=PaletteSelector;PaletteSelector.__docgenInfo={description:"",methods:[],displayName:"PaletteSelector"};const rotate_left=(0,react.createElement)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.wA,{d:"M12 4V2.2L9 4.8l3 2.5V5.5c3.6 0 6.5 2.9 6.5 6.5 0 2.9-1.9 5.3-4.5 6.2v.2l-.1-.2c-.4.1-.7.2-1.1.2l.2 1.5c.3 0 .6-.1 1-.2 3.5-.9 6-4 6-7.7 0-4.4-3.6-8-8-8zm-7.9 7l1.5.2c.1-1.2.5-2.3 1.2-3.2l-1.1-.9C4.8 8.2 4.3 9.6 4.1 11zm1.5 1.8l-1.5.2c.1.7.3 1.4.5 2 .3.7.6 1.3 1 1.8l1.2-.8c-.3-.5-.6-1-.8-1.5s-.4-1.1-.4-1.7zm1.5 5.5c1.1.9 2.4 1.4 3.8 1.6l.2-1.5c-1.1-.1-2.2-.5-3.1-1.2l-.9 1.1z"}));var lodash=__webpack_require__("./node_modules/lodash/lodash.js"),components=__webpack_require__("./assets/apps/components/src/components.js");const PaletteColors=({values,defaults,save})=>{const{palettes,activePalette}=values,palette=palettes[activePalette],{colors,allowDeletion}=palette,defaultColors=defaults.palettes[activePalette]?{...defaults.palettes[activePalette].colors}:{},paletteHasDefaultColors=Object.keys(defaultColors).filter((colorKey=>defaultColors[colorKey]!==colors[colorKey])).length<1;return(0,jsx_runtime.jsx)(components.nD,{label:(0,build_module.__)("Palette Colors","neve"),children:(0,jsx_runtime.jsxs)("div",{className:"color-array-wrap",children:[components.dw.map(((group,index)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("hr",{}),Object.keys(group).map((slug=>(0,jsx_runtime.jsx)(components.xi,{disableGlobal:!0,label:group[slug],selectedColor:colors[slug],defaultValue:defaults.palettes[activePalette]?defaults.palettes[activePalette].colors[slug]:"#FFFFFF",onChange:(0,lodash.debounce)((value=>{((colorSlug,val)=>{const nextValues={...values};if(nextValues.palettes[activePalette].colors[colorSlug]===val)return!1;nextValues.palettes[activePalette].colors[colorSlug]=val,save(nextValues)})(slug,value)}),100)},slug)))]},activePalette+"_"+index))),!allowDeletion&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("hr",{}),(0,jsx_runtime.jsx)(build_module_button.A,{isLink:!0,className:"reset-palette",onClick:()=>{const nextValues={...values};nextValues.palettes[activePalette].colors=defaultColors,save(nextValues)},disabled:paletteHasDefaultColors,icon:rotate_left,children:(0,build_module.__)("Reset all to default","neve")})]})]})})};PaletteColors.displayName="PaletteColors";const global_colors_PaletteColors=PaletteColors;PaletteColors.__docgenInfo={description:"",methods:[],displayName:"PaletteColors"};const plus_circle_filled=(0,react.createElement)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.wA,{d:"M2 12C2 6.44444 6.44444 2 12 2C17.5556 2 22 6.44444 22 12C22 17.5556 17.5556 22 12 22C6.44444 22 2 17.5556 2 12ZM13 11V7H11V11H7V13H11V17H13V13H17V11H13Z"})),PaletteForm=({values,save,disabled})=>{const{palettes}=values,[isAdding,setIsAdding]=(0,react.useState)(!1),[newPaletteName,setNewPaletteName]=(0,react.useState)(""),[paletteFrom,setPaletteFrom]=(0,react.useState)("base"),toggleAdding=()=>{setIsAdding(!isAdding),setNewPaletteName("")},setBasePalette=e=>{setPaletteFrom(e.target.value)};return isAdding?(0,jsx_runtime.jsxs)("div",{className:"add-palette-form",children:[(0,jsx_runtime.jsx)("input",{type:"text",placeholder:(0,build_module.__)("Palette Title","neve"),onChange:e=>{setNewPaletteName(e.target.value)}}),(0,jsx_runtime.jsx)("span",{className:"customize-control-title",children:(0,build_module.__)("Extend from:","neve")}),(0,jsx_runtime.jsx)("select",{value:paletteFrom,onChange:setBasePalette,onBlur:setBasePalette,children:Object.keys(palettes).map(((palette,index)=>(0,jsx_runtime.jsx)("option",{value:palette,children:palettes[palette].name},index)))}),(0,jsx_runtime.jsxs)("div",{className:"actions",children:[(0,jsx_runtime.jsx)(build_module_button.A,{isSmall:!0,isSecondary:!0,isDestructive:!0,onClick:toggleAdding,children:(0,build_module.__)("Cancel","neve")}),(0,jsx_runtime.jsx)(build_module_button.A,{isSmall:!0,icon:plus_circle_filled,iconSize:16,isPrimary:!0,onClick:e=>{e.preventDefault();const nextValue={...values},paletteSlug=(0,lodash.camelCase)(newPaletteName);nextValue.palettes[paletteSlug]={name:newPaletteName,allowDeletion:!0,colors:{...nextValue.palettes[paletteFrom].colors}},nextValue.activePalette=paletteSlug,save(nextValue),toggleAdding()},disabled:Object.keys(palettes).filter((item=>(0,lodash.camelCase)(newPaletteName)===item)).length>0||newPaletteName.length<1,children:(0,build_module.__)("Add","neve")})]})]}):(0,jsx_runtime.jsx)("div",{className:"add-palette-form",children:(0,jsx_runtime.jsx)(build_module_button.A,{disabled,style:{alignSelf:"flex-start"},isSmall:!0,isSecondary:!0,icon:plus_circle_filled,iconSize:16,onClick:toggleAdding,children:(0,build_module.__)("Add Custom Palette","neve")})})};PaletteForm.displayName="PaletteForm";const global_colors_PaletteForm=PaletteForm;PaletteForm.__docgenInfo={description:"",methods:[],displayName:"PaletteForm"};const GlobalColors=({onChange,currentValue,label,defaultValues})=>(0,jsx_runtime.jsxs)("div",{className:"neve-global-colors-wrap",children:[label&&(0,jsx_runtime.jsx)("span",{className:"customize-control-title",children:label}),(0,jsx_runtime.jsx)(global_colors_PaletteSelector,{values:currentValue,save:onChange}),(0,jsx_runtime.jsx)(global_colors_PaletteForm,{values:currentValue,save:onChange,disabled:Object.keys(currentValue.palettes).length>5}),(0,jsx_runtime.jsx)(global_colors_PaletteColors,{values:currentValue,save:onChange,defaults:defaultValues})]});GlobalColors.displayName="GlobalColors";const global_colors_GlobalColors=GlobalColors;GlobalColors.__docgenInfo={description:"",methods:[],displayName:"GlobalColors"};var decorators=__webpack_require__("./stories/components/decorators.js"),values=__webpack_require__("./stories/utils/values.js");const GlobalColors_stories={title:"Customizer/Controls/Global Colors",component:global_colors_GlobalColors,args:{currentValue:values.vj,label:"Control Label"},decorators:[decorators.x]},Template=args=>{const[value,setValue]=(0,react.useState)(JSON.parse(JSON.stringify(args.currentValue)));return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_colors_GlobalColors,{onChange:setValue,currentValue:value,defaultValues:{...values.vj},label:args.label}),(0,jsx_runtime.jsxs)("div",{className:"value-previewer",children:[(0,jsx_runtime.jsx)("strong",{children:"Current Palette:"}),(0,jsx_runtime.jsx)("pre",{children:value.activePalette}),(0,jsx_runtime.jsx)("hr",{}),(0,jsx_runtime.jsx)("strong",{children:"All Palettes:"}),(0,jsx_runtime.jsx)("pre",{children:JSON.stringify(Object.keys(value.palettes))}),(0,jsx_runtime.jsx)("hr",{}),(0,jsx_runtime.jsx)("strong",{children:"Current Palette Values:"}),(0,jsx_runtime.jsx)("pre",{children:JSON.stringify(value.palettes[value.activePalette].colors,null," ")})]})]})},Default=Template.bind({}),AllPalettes=Template.bind({});AllPalettes.args={currentValue:values.Yx},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  // Code gymnastics to remove object reference.\n  const [value, setValue] = useState(JSON.parse(JSON.stringify(args.currentValue)));\n  return <>\n            <GlobalColors onChange={setValue} currentValue={value} defaultValues={{\n      ...GLOBAL_COLORS_DEFAULT\n    }} label={args.label} />\n            <div className=\"value-previewer\">\n                <strong>Current Palette:</strong>\n                <pre>{value.activePalette}</pre>\n                <hr />\n                <strong>All Palettes:</strong>\n                <pre>{JSON.stringify(Object.keys(value.palettes))}</pre>\n                <hr />\n                <strong>Current Palette Values:</strong>\n                <pre>\n                    {JSON.stringify(value.palettes[value.activePalette].colors, null, ' ')}\n                </pre>\n            </div>\n        </>;\n}",...Default.parameters?.docs?.source}}},AllPalettes.parameters={...AllPalettes.parameters,docs:{...AllPalettes.parameters?.docs,source:{originalSource:"args => {\n  // Code gymnastics to remove object reference.\n  const [value, setValue] = useState(JSON.parse(JSON.stringify(args.currentValue)));\n  return <>\n            <GlobalColors onChange={setValue} currentValue={value} defaultValues={{\n      ...GLOBAL_COLORS_DEFAULT\n    }} label={args.label} />\n            <div className=\"value-previewer\">\n                <strong>Current Palette:</strong>\n                <pre>{value.activePalette}</pre>\n                <hr />\n                <strong>All Palettes:</strong>\n                <pre>{JSON.stringify(Object.keys(value.palettes))}</pre>\n                <hr />\n                <strong>Current Palette Values:</strong>\n                <pre>\n                    {JSON.stringify(value.palettes[value.activePalette].colors, null, ' ')}\n                </pre>\n            </div>\n        </>;\n}",...AllPalettes.parameters?.docs?.source}}};const __namedExportsOrder=["Default","AllPalettes"]},"./node_modules/@wordpress/components/build-module/modal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Modal});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),use_instance_id=__webpack_require__("./node_modules/@wordpress/compose/build-module/hooks/use-instance-id/index.js"),use_focus_on_mount=__webpack_require__("./node_modules/@wordpress/compose/build-module/hooks/use-focus-on-mount/index.js"),use_constrained_tabbing=__webpack_require__("./node_modules/@wordpress/compose/build-module/hooks/use-constrained-tabbing/index.js"),use_focus_return=__webpack_require__("./node_modules/@wordpress/compose/build-module/hooks/use-focus-return/index.js"),use_focus_outside=__webpack_require__("./node_modules/@wordpress/compose/build-module/hooks/use-focus-outside/index.js"),use_merge_refs=__webpack_require__("./node_modules/@wordpress/compose/build-module/hooks/use-merge-refs/index.js"),build_module=__webpack_require__("./node_modules/@wordpress/deprecated/build-module/index.js"),keycodes_build_module=__webpack_require__("./node_modules/@wordpress/keycodes/build-module/index.js"),i18n_build_module=__webpack_require__("./node_modules/@wordpress/i18n/build-module/index.js"),close_small=__webpack_require__("./node_modules/@wordpress/icons/build-module/library/close-small.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js");const LIVE_REGION_ARIA_ROLES=new Set(["alert","status","log","marquee","timer"]);let hiddenElements=[],isHidden=!1;function hideApp(unhiddenElement){if(isHidden)return;const elements=document.body.children;(0,lodash.forEach)(elements,(element=>{element!==unhiddenElement&&function elementShouldBeHidden(element){const role=element.getAttribute("role");return!("SCRIPT"===element.tagName||element.hasAttribute("aria-hidden")||element.hasAttribute("aria-live")||LIVE_REGION_ARIA_ROLES.has(role))}(element)&&(element.setAttribute("aria-hidden","true"),hiddenElements.push(element))})),isHidden=!0}var build_module_button=__webpack_require__("./node_modules/@wordpress/components/build-module/button/index.js");let openModalCount=0;function Modal({bodyOpenClassName="modal-open",role="dialog",title=null,focusOnMount=!0,shouldCloseOnEsc=!0,shouldCloseOnClickOutside=!0,isDismissable,isDismissible=isDismissable||!0,aria={labelledby:null,describedby:null},onRequestClose,icon,closeButtonLabel,children,style,overlayClassName,className,contentLabel,onKeyDown}){const ref=(0,react.useRef)(),instanceId=(0,use_instance_id.A)(Modal),headingId=title?`components-modal-header-${instanceId}`:aria.labelledby,focusOnMountRef=(0,use_focus_on_mount.A)(focusOnMount),constrainedTabbingRef=(0,use_constrained_tabbing.A)(),focusReturnRef=(0,use_focus_return.A)(),focusOutsideProps=(0,use_focus_outside.A)(onRequestClose);return(0,react.useEffect)((()=>(openModalCount++,1===openModalCount&&(hideApp(ref.current),document.body.classList.add(bodyOpenClassName)),()=>{openModalCount--,0===openModalCount&&(document.body.classList.remove(bodyOpenClassName),function showApp(){isHidden&&((0,lodash.forEach)(hiddenElements,(element=>{element.removeAttribute("aria-hidden")})),hiddenElements=[],isHidden=!1)}())})),[]),isDismissable&&(0,build_module.A)("isDismissable prop of the Modal component",{since:"5.4",alternative:"isDismissible prop (renamed) of the Modal component"}),(0,react_dom.createPortal)((0,react.createElement)("div",{ref,className:classnames_default()("components-modal__screen-overlay",overlayClassName),onKeyDown:function handleEscapeKeyDown(event){shouldCloseOnEsc&&event.keyCode===keycodes_build_module._f&&!event.defaultPrevented&&(event.preventDefault(),onRequestClose&&onRequestClose(event))}},(0,react.createElement)("div",(0,esm_extends.A)({className:classnames_default()("components-modal__frame",className),style,ref:(0,use_merge_refs.A)([constrainedTabbingRef,focusReturnRef,focusOnMountRef]),role,"aria-label":contentLabel,"aria-labelledby":contentLabel?null:headingId,"aria-describedby":aria.describedby,tabIndex:"-1"},shouldCloseOnClickOutside?focusOutsideProps:{},{onKeyDown}),(0,react.createElement)("div",{className:"components-modal__content",role:"document"},(0,react.createElement)("div",{className:"components-modal__header"},(0,react.createElement)("div",{className:"components-modal__header-heading-container"},icon&&(0,react.createElement)("span",{className:"components-modal__icon-container","aria-hidden":!0},icon),title&&(0,react.createElement)("h1",{id:headingId,className:"components-modal__header-heading"},title)),isDismissible&&(0,react.createElement)(build_module_button.A,{onClick:onRequestClose,icon:close_small.A,label:closeButtonLabel||(0,i18n_build_module.__)("Close dialog")})),children))),document.body)}}}]);